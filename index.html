<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dessin style poterie</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background-color: #2b2b2b;
    overflow: hidden;
    cursor: crosshair;
  }
  canvas {
    display: block;
  }
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const centerX = canvas.width / 2;
const centerY = canvas.height / 2;

let brushSize = 20;
let brushColor = '#ffffff';
let drawing = false;
let angle = 0;

// Fonction pour calculer la distance entre le centre et le pointeur
function getDistance(x, y){
  return Math.sqrt(Math.pow(x - centerX, 2) + Math.pow(y - centerY, 2));
}

// Variables du rayon dynamique
let radius = 100;
let mouseX = centerX;
let mouseY = centerY;

// Gestion souris
canvas.addEventListener('mousedown', e => {
  drawing = true;
  mouseX = e.clientX;
  mouseY = e.clientY;
  radius = getDistance(mouseX, mouseY);
});

canvas.addEventListener('mouseup', () => drawing = false);
canvas.addEventListener('mousemove', e => {
  mouseX = e.clientX;
  mouseY = e.clientY;
  radius = getDistance(mouseX, mouseY);
});

// Touch support
canvas.addEventListener('touchstart', e => {
  drawing = true;
  const touch = e.touches[0];
  mouseX = touch.clientX;
  mouseY = touch.clientY;
  radius = getDistance(mouseX, mouseY);
});
canvas.addEventListener('touchmove', e => {
  const touch = e.touches[0];
  mouseX = touch.clientX;
  mouseY = touch.clientY;
  radius = getDistance(mouseX, mouseY);
  e.preventDefault();
});
canvas.addEventListener('touchend', () => drawing = false);

// Animation
function animate(){
  requestAnimationFrame(animate);

  if(drawing){
    ctx.save();
    ctx.translate(centerX, centerY);
    ctx.rotate(angle);
    ctx.fillStyle = brushColor;
    ctx.beginPath();
    ctx.arc(radius, 0, brushSize/2, 0, Math.PI*2);
    ctx.fill();
    ctx.restore();
  }

  angle += 0.02; // vitesse rotation
}

animate();

// Ajustement du canvas sur resize
window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
